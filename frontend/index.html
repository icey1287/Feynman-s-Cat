<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>费曼的猫 🐱 - 让用户教AI</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- 头部区域 -->
        <header class="header">
            <h1>🐱 费曼的猫</h1>
            <p class="subtitle">最好的学习方式是教别人</p>
        </header>

        <!-- 猫咪状态区域 -->
        <div class="cat-container">
            <div class="cat-avatar" id="catAvatar">
                <span class="cat-emoji" id="catEmoji">😺</span>
            </div>
            <div class="cat-info">
                <p class="cat-name">小费曼</p>
                <p class="cat-status" id="catStatus">等待学习新知识...</p>
            </div>
        </div>

        <!-- 知识条区域 -->
        <div class="knowledge-bar-container">
            <div class="knowledge-label">
                <span>知识掌握度</span>
                <span id="knowledgeValue">0%</span>
            </div>
            <div class="knowledge-bar">
                <div class="knowledge-fill" id="knowledgeFill" style="width: 0%"></div>
            </div>
            <div class="knowledge-states">
                <span class="state confused">一头雾水</span>
                <span class="state learning">一知半解</span>
                <span class="state mastered">完全掌握</span>
            </div>
        </div>

        <!-- 当前话题 -->
        <div class="current-topic" id="currentTopic" style="display: none;">
            <span class="topic-label">当前学习：</span>
            <span class="topic-name" id="topicName"></span>
            <button class="reset-btn" onclick="resetSession()">🔄 换个话题</button>
        </div>

        <!-- 开始学习表单 -->
        <div class="start-form" id="startForm">
            <h2>📚 选择一个知识点</h2>
            <p>输入你想要教给小费曼的知识点</p>
            <div class="input-group">
                <input type="text" id="topicInput" placeholder="例如：二叉树、光合作用、相对论..." 
                       onkeypress="handleTopicKeyPress(event)">
                <button class="start-btn" onclick="startLearning()">开始教学 🎓</button>
            </div>
            <div class="examples">
                <span>热门话题：</span>
                <button onclick="setTopic('递归算法')">递归算法</button>
                <button onclick="setTopic('光合作用')">光合作用</button>
                <button onclick="setTopic('供需曲线')">供需曲线</button>
                <button onclick="setTopic('牛顿第三定律')">牛顿第三定律</button>
            </div>
        </div>

        <!-- 对话区域 -->
        <div class="chat-container" id="chatContainer" style="display: none;">
            <div class="chat-messages" id="chatMessages">
                <!-- 消息会在这里动态添加 -->
            </div>
            <div class="chat-input-container">
                <textarea id="messageInput" placeholder="用你自己的话解释给小费曼听..." 
                          onkeypress="handleMessageKeyPress(event)" rows="3"></textarea>
                <button class="send-btn" onclick="sendMessage()" id="sendBtn">
                    发送 📨
                </button>
            </div>
            <div class="hint-box" id="hintBox" style="display: none;">
                <span class="hint-icon">💡</span>
                <span class="hint-text" id="hintText"></span>
            </div>
        </div>

        <!-- 加载弹窗 -->
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-content">
                <div class="loading-cat">🐱</div>
                <div class="loading-text" id="loadingText">小费曼正在思考...</div>
                <div class="loading-bar">
                    <div class="loading-progress" id="loadingProgress"></div>
                </div>
                <div class="loading-tips" id="loadingTips">正在连接AI服务...</div>
            </div>
        </div>

        <!-- 通关庆祝 -->
        <div class="celebration" id="celebration" style="display: none;">
            <div class="celebration-content">
                <h2>🎉 恭喜通关！</h2>
                <p class="celebration-emoji">😸</p>
                <p>小费曼完全理解了 "<span id="completedTopic"></span>"</p>
                <p class="celebration-message">你是一位优秀的老师！</p>
                <button class="new-topic-btn" onclick="resetSession()">挑战新知识点 🚀</button>
            </div>
        </div>

        <!-- 底部说明 -->
        <footer class="footer">
            <p>💡 费曼学习法：如果你不能简单地解释一件事，说明你还没有真正理解它。</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
